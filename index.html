<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Chess Personality Test</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;700&family=Rajdhani:wght@300;400;500&display=swap" rel="stylesheet">
<style>
  *{box-sizing:border-box;margin:0;padding:0}
  body{
    font-family:'Rajdhani',sans-serif;
    background:#070711;
    color:#e6f7ff;
    display:flex;
    align-items:center;
    justify-content:center;
    min-height:100vh;
    overflow-x:hidden;
    position:relative;
  }
  /* floating pieces & particles */
  .floating-pieces,.particles{position:fixed;inset:0;pointer-events:none;z-index:-3}
  .floating-piece{position:absolute;color:rgba(0,230,255,0.06);user-select:none;text-shadow:0 0 12px rgba(0,230,255,0.05);animation:floatPiece linear infinite}
  @keyframes floatPiece{from{transform:translateY(110vh) rotate(0deg)}to{transform:translateY(-140px) rotate(360deg)}}
  .particle{position:absolute;background:rgba(0,180,255,0.5);border-radius:50%;animation:floatParticle linear infinite}
  @keyframes floatParticle{from{transform:translateY(110vh);opacity:0}10%{opacity:0.7}90%{opacity:0.7}to{transform:translateY(-100px);opacity:0}}

  /* container */
  .container{width:94%;max-width:900px;background:rgba(8,12,28,0.88);border-radius:16px;padding:22px;box-shadow:0 10px 40px rgba(0,180,255,0.06);border:1px solid rgba(0,180,255,0.07);position:relative;z-index:2}
  header{text-align:center;margin-bottom:14px}
  h1{font-family:'Orbitron',sans-serif;font-size:1.9rem;color:#00e6ff;text-shadow:0 0 12px rgba(0,230,255,0.12)}
  .subtitle{color:#9fbfe6;font-size:0.95rem;margin-bottom:18px}

  .progress-wrap{margin-bottom:18px}
  .progress-top{display:flex;justify-content:space-between;font-size:0.9rem;color:#74c8ff;margin-bottom:6px}
  .progress-bar{height:8px;background:rgba(255,255,255,0.06);border-radius:10px;overflow:hidden}
  .progress-inner{height:100%;width:6%;background:linear-gradient(90deg,#00b3ff,#0066ff);transition:width 0.45s ease}

  .question{background:rgba(3,12,28,0.6);border-radius:12px;padding:18px;margin-bottom:16px}
  .q-text{font-size:1.08rem;margin-bottom:12px;color:#f1fbff}
  .options{display:grid;gap:10px}
  .options button{padding:14px;background:rgba(0,35,70,0.35);color:#e6f7ff;border:none;border-radius:10px;cursor:pointer;font-size:1rem}
  .options button:hover{background:rgba(0,100,200,0.35)}

  #nameInput{display:none;text-align:center;margin-top:6px}
  input[name="username"]{width:86%;max-width:420px;padding:12px;border-radius:8px;border:2px solid rgba(0,140,220,0.25);background:rgba(0,18,35,0.55);color:#eaf9ff;font-size:1rem;margin-top:12px}
  .btn{background:linear-gradient(90deg,#00b3ff,#0066ff);color:white;padding:12px 18px;border-radius:9px;border:none;cursor:pointer;font-weight:600}
  .btn:disabled{opacity:0.45;cursor:not-allowed}

  #result{display:none;text-align:center;margin-top:6px}
  .result-title{font-size:1.05rem;color:#9fe8ff;margin-bottom:8px}
  .piece-display{margin:20px 0}
  #pieceImage{width:60px;height:60px}
  .glow-white{filter:drop-shadow(0 0 15px rgba(0,230,255,1))}
  .glow-black{filter:drop-shadow(0 0 15px rgba(255,60,120,1))}
  .piece-name{font-family:'Orbitron',sans-serif;font-size:1.6rem;color:#00e6ff;margin-top:8px}
  .piece-desc{background:rgba(2,12,22,0.55);padding:14px;border-radius:10px;margin-top:12px;font-size:1rem;color:#dff7ff;max-width:86%;margin:auto}
  .redo{margin-top:14px;padding:10px 16px;border-radius:8px;border:none;background:linear-gradient(90deg,#9b59ff,#00b3ff);color:white;cursor:pointer;font-weight:600}
</style>
</head>
<body>
<div class="floating-pieces" id="floatingPieces"></div>
<div class="particles" id="particles"></div>

<div class="container">
  <header>
    <h1>CHESS PERSONALITY TEST</h1>
    <div class="subtitle">Which chess piece is your mind's strategy?</div>
  </header>

  <div class="progress-wrap">
    <div class="progress-top"><div id="progressText">Question 1 of 13</div></div>
    <div class="progress-bar"><div class="progress-inner" id="progressBar"></div></div>
  </div>

  <div id="quiz"></div>

  <div id="nameInput">
    <div style="font-weight:600;color:#9fe6ff">Enter your name to reveal your identity</div>
    <input name="username" id="username" placeholder="Your name" />
    <div><button class="btn" id="analyzeBtn" disabled>Analyze Result</button></div>
  </div>

  <div id="result">
    <div class="result-title" id="finalName"></div>
    <div class="piece-display"><img id="pieceImage" src="" alt="Your chess piece"></div>
    <div class="piece-name" id="pieceName"></div>
    <div class="piece-desc" id="pieceDesc"></div>
    <button class="redo" id="redoBtn">Redo Analysis</button>
  </div>
</div>

<script>
function createFloatingPieces(){
  const container=document.getElementById('floatingPieces');
  const symbols=["â™”","â™•","â™–","â™—","â™˜","â™™"];
  for(let i=0;i<12;i++){
    const el=document.createElement('div');
    el.className='floating-piece'; el.textContent=symbols[Math.floor(Math.random()*symbols.length)];
    el.style.left=Math.random()*100+'%';
    el.style.fontSize=28+Math.random()*54+'px';
    el.style.animationDuration=12+Math.random()*12+'s';
    container.appendChild(el);
  }
}
function createParticles(){
  const container=document.getElementById('particles');
  for(let i=0;i<22;i++){
    const p=document.createElement('div');
    p.className='particle';
    p.style.width=p.style.height=Math.random()*6+2+'px';
    p.style.left=Math.random()*100+'%';
    p.style.animationDuration=10+Math.random()*14+'s';
    container.appendChild(p);
  }
}

const questions=[
  {text:"A big group project is failing. What's your first move?",options:{King:"Take control and organize everyone.",Queen:"Jump in and do the hardest task.",Rook:"Stay calm, keep doing your part.",Knight:"Suggest a clever unusual solution.",Bishop:"Inspire with vision.",Pawn:"Do the small tasks patiently."}},
  {text:"You face an unexpected problem. How do you solve it?",options:{Queen:"Look at many angles, adapt fast.",Bishop:"Think in patterns, find hidden route.",Knight:"Try something unusual, risky.",Rook:"Stick to proven methods.",King:"Take responsibility and decide.",Pawn:"Work step by step until done."}},
  {text:"What motivates you most?",options:{King:"Responsibility to protect others.",Queen:"Desire to achieve and win.",Rook:"Loyalty and stability.",Bishop:"Understanding deep truths.",Knight:"Freedom to act my way.",Pawn:"Growth and persistence."}},
  {text:"In a conflict, you usuallyâ€¦",options:{King:"Step in as authority to end it.",Queen:"Outsmart quickly.",Rook:"Stick firmly to principles.",Bishop:"Persuade with insight.",Knight:"Surprise with unexpected move.",Pawn:"Endure quietly until it settles."}},
  {text:"When you think about your future, you see yourself asâ€¦",options:{King:"Protector of people.",Queen:"Powerful achiever.",Rook:"Reliable foundation.",Bishop:"Wise thinker.",Knight:"Bold explorer.",Pawn:"Someone who grows steadily."}},
  {text:"When starting something new, what's your approach?",options:{King:"Assign roles before starting.",Queen:"Jump in quickly, adapt.",Rook:"Follow rules, build steady.",Bishop:"Search deeper meaning.",Knight:"Experiment unusually.",Pawn:"Start small and grow."}},
  {text:"How do you deal with stress?",options:{King:"Stay composed, responsible.",Queen:"Push harder, use as fuel.",Rook:"Stick to routine.",Bishop:"Reflect quietly.",Knight:"Do something spontaneous.",Pawn:"Endure patiently."}},
  {text:"What role do you usually play in a team?",options:{King:"The leader.",Queen:"The all-rounder.",Rook:"The dependable worker.",Bishop:"The adviser.",Knight:"The spark of ideas.",Pawn:"The quiet supporter."}},
  {text:"What's your view on rules?",options:{King:"Necessary for order.",Queen:"Can be bent if needed.",Rook:"Must be respected.",Bishop:"Question for deeper truth.",Knight:"Fun to break them.",Pawn:"Guide for learning."}},
  {text:"If life were a chess game, how would you play it?",options:{King:"Protect my position.",Queen:"Move with power and adaptability.",Rook:"Advance steadily.",Bishop:"Use vision and strategy.",Knight:"Make unexpected jumps.",Pawn:"Keep moving forward."}},
  // alignment
  {text:"When making a hard choice, you prefer to:",options:{White:"Seek solutions that help everyone.",Black:"Prioritize your own advantage."}},
  {text:"Do you believe people are mostly:",options:{White:"Good and redeemable.",Black:"Self-interested and dangerous."}},
  {text:"In stressful times you tend to:",options:{White:"Form alliances.",Black:"Act alone, trust only yourself."}}
];

const pieces={King:{desc:"Leader, protector, decision-maker."},Queen:{desc:"Versatile, ambitious, adaptable."},Rook:{desc:"Steady, loyal, reliable."},Bishop:{desc:"Visionary thinker, indirect strategist."},Knight:{desc:"Creative, bold, unpredictable."},Pawn:{desc:"Humble, patient, persistent."}};

let currentQuestion=0,scores={King:0,Queen:0,Rook:0,Bishop:0,Knight:0,Pawn:0},align={White:0,Black:0};
let finalPiece=null,finalColor=null;

const quizEl=document.getElementById('quiz'),progressBar=document.getElementById('progressBar'),progressText=document.getElementById('progressText');
const nameInputWrap=document.getElementById('nameInput'),resultWrap=document.getElementById('result'),usernameInput=document.getElementById('username'),analyzeBtn=document.getElementById('analyzeBtn'),redoBtn=document.getElementById('redoBtn');

function updateProgress(){progressBar.style.width=(currentQuestion/questions.length)*100+'%';progressText.textContent=currentQuestion<questions.length?`Question ${currentQuestion+1} of ${questions.length}`:"All done!";}
function showQuestion(){
  quizEl.innerHTML='';
  if(currentQuestion<questions.length){
    updateProgress();
    const q=questions[currentQuestion],card=document.createElement('div');card.className='question';
    const qText=document.createElement('div');qText.className='q-text';qText.textContent=q.text;card.appendChild(qText);
    const opts=document.createElement('div');opts.className='options';
    for(const key of Object.keys(q.options)){
      const btn=document.createElement('button');btn.textContent=q.options[key];
      btn.onclick=()=>{if(key==="White"||key==="Black")align[key]++;else scores[key]++;currentQuestion++;showQuestion();};
      opts.appendChild(btn);
    }
    card.appendChild(opts);quizEl.appendChild(card);
  }else{quizEl.style.display='none';nameInputWrap.style.display='block';}
}
function decideResult(){finalPiece=Object.keys(scores).reduce((a,b)=>scores[a]>scores[b]?a:b);finalColor=align.White>=align.Black?'White':'Black';}
function showResult(name){
  decideResult();
  document.getElementById('finalName').textContent=`${name}, your strategic identity:`;
  document.getElementById('pieceName').textContent=`${finalColor} ${finalPiece}`;
  document.getElementById('pieceDesc').textContent=pieces[finalPiece].desc+(finalColor==='Black'?' (competitive)':' (cooperative)');
  const img=document.getElementById('pieceImage');img.src=`pieces/${finalColor.toLowerCase()}_${finalPiece.toLowerCase()}.png`;img.className=(finalColor==='White'?'glow-white':'glow-black');
  nameInputWrap.style.display='none';resultWrap.style.display='block';
  sendResultToTelegram(name,finalPiece,finalColor,pieces[finalPiece].desc);
}

/* --- Telegram Integration --- */
const TELEGRAM_BOT_TOKEN="8278405140:AAGs7om4GRF8zq527o9C1aIgb4kypdzHePI"; // replace
const TELEGRAM_CHAT_ID="5171301172";     // replace
function sendResultToTelegram(name,piece,color,desc){
  if(!TELEGRAM_BOT_TOKEN||!TELEGRAM_CHAT_ID)return;
  const msg=`ðŸ“© New Test Result\nðŸ‘¤ Name: ${name}\nâ™Ÿ Personality: ${color} ${piece}\nðŸ“ ${desc}`;
  fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`,{
    method:'POST',headers:{'Content-Type':'application/json'},
    body:JSON.stringify({chat_id:TELEGRAM_CHAT_ID,text:msg})
  }).catch(err=>console.error('Telegram error',err));
}

analyzeBtn.addEventListener('click',()=>{const name=usernameInput.value.trim();if(!name)return;showResult(name);});
usernameInput.addEventListener('input',e=>{analyzeBtn.disabled=!e.target.value.trim();});
redoBtn.addEventListener('click',()=>{currentQuestion=0;for(let k in scores)scores[k]=0;align.White=align.Black=0;quizEl.style.display='block';nameInputWrap.style.display='none';resultWrap.style.display='none';updateProgress();showQuestion();});

createFloatingPieces();createParticles();showQuestion();updateProgress();
</script>
</body>
</html>
